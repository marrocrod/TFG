{% extends "base.html" %}

{% block content %}
<h2>Calendario</h2>
<div id="calendar"></div>

<!-- Ventana Modal -->
<div id="eventModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Crear Evento</h2>
        <form id="eventForm">
            <label for="title">Título del Evento:</label>
            <input type="text" id="title" name="title" required>

            <label for="start">Fecha de Inicio:</label>
            <input type="datetime-local" id="start" name="start" required>

            <label for="end">Fecha de Fin:</label>
            <input type="datetime-local" id="end" name="end" required>

            <button type="submit">Guardar Evento</button>
        </form>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        var calendarEl = document.getElementById('calendar');
        var calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'dayGridMonth', // Vista de mes completa
            events: '/api/calendar-events/', // URL para obtener los eventos
            dateClick: function(info) {
                // Redirige a la vista del día seleccionado
                window.location.href = `/calendar/day/${info.dateStr}/`;
            },
            eventClick: function(info) {
                alert('Evento: ' + info.event.title);
                // Puedes agregar lógica para mostrar más detalles del evento
            }
        });
        calendar.render();
    });
</script>

<!-- Estilos para la ventana modal -->
<style>
    .modal {
        display: none; /* Oculto por defecto */
        position: fixed; /* Fijado en la pantalla */
        z-index: 1; /* Aparece en la parte superior */
        left: 0;
        top: 0;
        width: 100%; /* Ocupa todo el ancho de la pantalla */
        height: 100%; /* Ocupa todo el alto de la pantalla */
        overflow: auto; /* Permite scroll si el contenido es grande */
        background-color: rgb(0,0,0); /* Color de fondo */
        background-color: rgba(0,0,0,0.4); /* Color de fondo con transparencia */
    }

    .modal-content {
        background-color: #fefefe;
        margin: 15% auto; /* 15% desde la parte superior y centrado */
        padding: 20px;
        border: 1px solid #888;
        width: 80%; /* Ancho de la ventana modal */
    }

    .close {
        color: #aaa;
        float: right;
        font-size: 28px;
        font-weight: bold;
    }

    .close:hover,
    .close:focus {
        color: black;
        text-decoration: none;
        cursor: pointer;
    }
</style>
{% endblock %}
